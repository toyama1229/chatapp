<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ホーム - 資格勉強チャットアプリ</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- Chart.jsを読み込む -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="home-body">
  <!-- ヘッダー -->
  <header class="top-menu">
    <h1 class="home-title">📚 資格勉強チャットアプリ</h1>
    <nav>
      <button id="homeBtn">🏠 ホーム</button>
      <button id="chatBtn">💬 チャット</button>
      <button id="postentranceBtn">📚 記録</button>
      <button id="logoutBtn">🚪 ログアウト</button>
    </nav>
  </header>

  <!-- メインコンテンツ -->
  <main>
    <h2 id="welcome"></h2>
    
    <div class="widget-container">
      <!-- 試験日まで -->
      <div class="widget" id="examCountdown">
        <h3>資格試験受験予定一覧</h3>
      </div>

      <!-- 最近の学習履歴 -->
      <div class="widget" id="recentHistory">
        <h3>最近の学習履歴</h3>
        <ul id="historyList"></ul>
      </div>       
    </div>

    <!-- 学習時間グラフ -->
    <div class="widget" id="studyTimeChart">
      <h3>今週の学習時間</h3>
      <canvas id="weeklyChart"></canvas>
    </div> 
  </main>

  <!-- ログインチェックとページ遷移 -->
  <script>
    const user = localStorage.getItem('chatUser');
    if (!user) {
      window.location.href = 'index.html';
    }
    document.getElementById('welcome').textContent = `${user} さん、こんにちは！`;

    document.getElementById('homeBtn').addEventListener('click', () => {
      window.location.href = 'home.html';
    });
    document.getElementById('chatBtn').addEventListener('click', () => {
      window.location.href = 'chat.html';
    });
    document.getElementById('postentranceBtn').addEventListener('click', () => {
      window.location.href = 'post.html';
    });
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('chatUser');
      window.location.href = 'index.html';
    });
  </script>

  <!-- メインロジック -->
  <script src="js/home.js"></script>
</body>
</html>
